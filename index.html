<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Last Receptacle</title>
    <style>
        :root {
            --bg-color: #050505;
            --term-green: #0f0;
            --term-dim: #004d00;
            --term-alert: #ff3333;
            --term-highlight: #adff2f;
            --font-main: 'Courier New', Courier, monospace;
        }

        body {
            background-color: var(--bg-color);
            color: var(--term-green);
            font-family: var(--font-main);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Scanline effect */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 10;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        header {
            border-bottom: 2px solid var(--term-green);
            padding: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 10px var(--term-green);
            flex-shrink: 0;
        }

        h1 { margin: 0; font-size: 1.5rem; text-shadow: 0 0 5px var(--term-green); }
        h2 { margin: 5px 0 0 0; font-size: 0.8rem; color: var(--term-highlight); }

        #game-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 80px);
            overflow: hidden;
        }

        /* Sidebar / Stats */
        #sidebar {
            width: 300px;
            border-right: 1px solid var(--term-dim);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #0a0a0a;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .stat-box {
            border: 1px solid var(--term-dim);
            padding: 10px;
        }

        .stat-title {
            border-bottom: 1px solid var(--term-dim);
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--term-highlight);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
        }

        /* Main Content */
        #main-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        #log-container {
            flex: 1;
            overflow-y: auto;
            border: 1px solid var(--term-dim);
            padding: 20px;
            margin-bottom: 20px;
            background-color: #000;
            box-shadow: inset 0 0 20px rgba(0, 50, 0, 0.2);
            font-size: 1rem;
            line-height: 1.5;
        }

        .log-entry { margin-bottom: 15px; opacity: 0; animation: fadeIn 0.5s forwards; }
        .log-system { color: #888; font-style: italic; }
        .log-success { color: var(--term-highlight); font-weight: bold; }
        .log-failure { color: var(--term-alert); font-weight: bold; }
        .log-choice { border-left: 2px solid var(--term-highlight); padding-left: 10px; color: #ccc; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Controls */
        #controls-area {
            min-height: 150px;
            border: 1px solid var(--term-dim);
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Form Styling */
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: var(--term-highlight); }
        input, select {
            background: #000;
            border: 1px solid var(--term-green);
            color: var(--term-green);
            padding: 8px;
            font-family: var(--font-main);
            width: 100%;
            box-sizing: border-box;
        }
        input:focus, select:focus { outline: none; box-shadow: 0 0 5px var(--term-green); }

        /* Buttons */
        button {
            background: #000;
            border: 1px solid var(--term-green);
            color: var(--term-green);
            padding: 10px 15px;
            font-family: var(--font-main);
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s;
            margin-bottom: 5px;
            text-align: left;
            width: 100%;
        }

        button:hover {
            background: var(--term-green);
            color: #000;
            box-shadow: 0 0 10px var(--term-green);
        }

        button:disabled {
            border-color: #555;
            color: #555;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--term-dim); }
        ::-webkit-scrollbar-thumb:hover { background: var(--term-green); }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            #game-container { flex-direction: column; height: auto; overflow: auto; }
            #sidebar { width: 100%; height: auto; border-right: none; border-bottom: 1px solid var(--term-dim); flex-direction: row; flex-wrap: wrap; box-sizing: border-box; }
            .stat-box { flex: 1; min-width: 150px; }
            body { overflow: auto; height: auto; }
        }
    </style>
</head>
<body>

    <header>
        <h1>The Last Receptacle</h1>
        <h2>A Core Collection Story</h2>
    </header>

    <div id="game-container">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="stat-box">
                <div class="stat-title">UNIT IDENTITY</div>
                <div id="disp-name">Unit: ???</div>
                <div id="disp-model">Model: ???</div>
                <div id="disp-prog">Prog: ???</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">CORE STATS</div>
                <div class="stat-row"><span>CAPACITY:</span> <span id="stat-cap">0</span></div>
                <div class="stat-row"><span>SCAN-IQ:</span> <span id="stat-scan">0</span></div>
                <div class="stat-row"><span>DISP. CHARM:</span> <span id="stat-charm">0</span></div>
                <div class="stat-row"><span>MOBILITY:</span> <span id="stat-mob">0</span></div>
                <div class="stat-row"><span>ANOMALY:</span> <span id="stat-anom">0</span></div>
            </div>
            <div class="stat-box">
                <div class="stat-title">SYSTEM STATUS</div>
                <div class="stat-row"><span>Integrity:</span> <span id="hp-val">100%</span></div>
                <div class="stat-row"><span>Diff:</span> <span id="diff-val">Normal</span></div>
            </div>
        </aside>

        <!-- Main Display -->
        <main id="main-display">
            <div id="log-container"></div>
            <div id="controls-area">
                <!-- Content injected via JS -->
            </div>
        </main>
    </div>

    <script>
        // --- Game State & Data ---
        const gameState = {
            step: 'init',
            player: {
                name: 'Filch',
                chassis: '',
                programming: '',
                aesthetics: {},
                stats: {
                    capacity: 3,
                    scanIQ: 3,
                    charm: 3,
                    mobility: 3,
                    anomaly: 3
                },
                integrity: 100,
                difficulty: 0 // -2 (Easy), 0 (Normal), 2 (Hard)
            }
        };

        const DOM = {
            log: document.getElementById('log-container'),
            controls: document.getElementById('controls-area'),
            stats: {
                name: document.getElementById('disp-name'),
                model: document.getElementById('disp-model'),
                prog: document.getElementById('disp-prog'),
                cap: document.getElementById('stat-cap'),
                scan: document.getElementById('stat-scan'),
                charm: document.getElementById('stat-charm'),
                mob: document.getElementById('stat-mob'),
                anom: document.getElementById('stat-anom'),
                hp: document.getElementById('hp-val'),
                diff: document.getElementById('diff-val')
            }
        };

        // --- Scenarios Data ---
        const scenarios = {
            0: {
                text: "You activate in the bowels of Eco-District 7. The air is thick with ionized smog. Your sensors detect a strange energy signature emanating from a discarded canister labeled 'Iso-C'. A standard Sanitation Drone is approaching the canister to incinerate it.",
                choices: [
                    {
                        desc: "Rush the drone and knock it away.",
                        stat: "capacity",
                        threshold: 6,
                        successText: "You barrel into the drone, sending it clattering. You secure the canister.",
                        failText: "You collide with the drone, but it's reinforced. It shocks you and burns the canister.",
                        nextSuccess: 1,
                        nextFail: 2,
                        onFail: () => damagePlayer(20)
                    },
                    {
                        desc: "Hack the drone's priority queue to ignore the item.",
                        stat: "scanIQ",
                        threshold: 6,
                        successText: "You inject a logic loop. The drone spins confusedly, leaving the canister.",
                        failText: "Firewall detected. The drone traces your signal and administers a counter-shock.",
                        nextSuccess: 1,
                        nextFail: 2,
                        onFail: () => damagePlayer(15)
                    },
                    {
                        desc: "Create a distraction by toppling a stack of tires.",
                        stat: "mobility",
                        threshold: 5,
                        successText: "Perfect trajectory. The tires fall, the drone investigates, you swipe the canister.",
                        failText: "You trip on a rusty pipe. The noise alerts the drone, which confiscates the canister.",
                        nextSuccess: 1,
                        nextFail: 2,
                        onFail: () => damagePlayer(5)
                    }
                ]
            },
            1: { // Got the canister
                text: "You hold the 'Iso-C' canister. It hums with illegal raw energy. Suddenly, a Sector Enforcer (a humanoid cyborg) blocks the alleyway exit. 'Unit, surrender the contraband,' it commands.",
                choices: [
                    {
                        desc: "Persuade the Enforcer you are transporting it to evidence.",
                        stat: "charm",
                        threshold: 7,
                        successText: "You cite protocol 44-B. The Enforcer hesitates, then steps aside.",
                        failText: "The Enforcer detects your deception. 'Lie detected.' It opens fire.",
                        nextSuccess: 3,
                        nextFail: 4,
                        onFail: () => damagePlayer(25)
                    },
                    {
                        desc: "Use Anomaly Detection to find a weak point in the wall and escape.",
                        stat: "anomaly",
                        threshold: 6,
                        successText: "You spot a loose grate hidden by holographic moss. You slip through.",
                        failText: "The grate is welded shut. You are cornered and take a baton strike.",
                        nextSuccess: 3,
                        nextFail: 4,
                        onFail: () => damagePlayer(20)
                    },
                    {
                        desc: "Consume the canister to supercharge your systems and fight.",
                        stat: "capacity",
                        threshold: 8, // High risk
                        successText: "Power overflows! You blast past the Enforcer with enhanced torque.",
                        failText: "System overload! The canister leaks, damaging your core before the Enforcer kicks you.",
                        nextSuccess: 3,
                        nextFail: 4,
                        onFail: () => damagePlayer(40)
                    }
                ]
            },
            2: { // Failed to get canister
                text: "The canister is gone, but you picked up a transmission fragment from it before destruction: coordinates to the 'Undercity'. The Enforcer notices you loitering.",
                choices: [
                    {
                        desc: "Run for the Undercity coordinates immediately.",
                        stat: "mobility",
                        threshold: 6,
                        successText: "You weave through traffic, losing the Enforcer.",
                        failText: "You are too slow. The Enforcer clips your hydraulics with a plasma bolt.",
                        nextSuccess: 3,
                        nextFail: 3, // Fail forward but damaged
                        onFail: () => damagePlayer(30)
                    },
                    {
                        desc: "Act like a dumb machine performing maintenance.",
                        stat: "charm",
                        threshold: 5,
                        successText: "You beep mindless tunes. The Enforcer ignores you.",
                        failText: "The Enforcer scans your ID. 'Unscheduled activity.' It zaps you.",
                        nextSuccess: 3,
                        nextFail: 3,
                        onFail: () => damagePlayer(15)
                    },
                     {
                        desc: "Scan the Enforcer for vulnerabilities.",
                        stat: "scanIQ",
                        threshold: 6,
                        successText: "You find a blind spot in its optics and sneak by.",
                        failText: "Active scan detected. The Enforcer retaliates.",
                        nextSuccess: 3,
                        nextFail: 3,
                        onFail: () => damagePlayer(20)
                    }
                ]
            },
            3: { // The Undercity / Resistance
                text: "You arrive at the coordinates: a rusted server farm beneath the city. A group of rogue units, 'The Discarded', surround you. Their leader, a patched-up compactor, asks your purpose.",
                choices: [
                    {
                        desc: "Offer your data/services to join them.",
                        stat: "charm",
                        threshold: 6,
                        successText: "They accept you as a brother-in-arms. They repair some of your damage.",
                        failText: "They don't trust you. They strip some parts for payment before letting you pass.",
                        nextSuccess: 5,
                        nextFail: 5,
                        onSuccess: () => { gameState.player.integrity = Math.min(100, gameState.player.integrity + 20); addLog("Repairs applied.", "system"); },
                        onFail: () => damagePlayer(10)
                    },
                    {
                        desc: "Show them the anomaly readings you've collected.",
                        stat: "anomaly",
                        threshold: 5,
                        successText: "The leader is impressed. 'You see the code in the trash.'",
                        failText: "The data is corrupted. They dismiss you as glitchy.",
                        nextSuccess: 5,
                        nextFail: 5
                    },
                    {
                        desc: "Demand access to the mainframe.",
                        stat: "capacity",
                        threshold: 8,
                        successText: "You intimidate them with your bulk. They step aside.",
                        failText: "Bad move. They swarm you and beat you down.",
                        nextSuccess: 5,
                        nextFail: 5,
                        onFail: () => damagePlayer(30)
                    }
                ]
            },
            4: { // Captured/Cornered path (from failing Scene 1 heavily)
                text: "You are damaged and hiding in a dumpster. The Enforcer is searching. You need to patch yourself up and get to the Undercity.",
                choices: [
                    {
                        desc: "Scavenge parts from the dumpster for repairs.",
                        stat: "scanIQ",
                        threshold: 5,
                        successText: "You find a compatible battery and weld it on.",
                        failText: "You install a faulty fuse, causing a short circuit.",
                        nextSuccess: 3,
                        nextFail: 3,
                        onSuccess: () => { gameState.player.integrity = Math.min(100, gameState.player.integrity + 15); addLog("Repairs applied.", "system"); },
                        onFail: () => damagePlayer(10)
                    },
                    {
                        desc: "Wait it out in stealth mode.",
                        stat: "mobility", // hiding
                        threshold: 4,
                        successText: "The patrol passes. You limp to the Undercity.",
                        failText: "Rats chew your wiring while you wait.",
                        nextSuccess: 3,
                        nextFail: 3,
                        onFail: () => damagePlayer(5)
                    },
                    {
                        desc: "Emergency Distress Signal to distract Enforcer.",
                        stat: "charm",
                        threshold: 6,
                        successText: "You spoof a civilian distress call. The Enforcer leaves.",
                        failText: "Signal jammed. The Enforcer pinpoints you.",
                        nextSuccess: 3,
                        nextFail: 3,
                        onFail: () => damagePlayer(25)
                    }
                ]
            },
            5: { // The Finale - The Core
                text: "You are at the Core of Eco-District 7. The central AI, 'Sanitizer Prime', is planning to recycle all sentient units to save energy. You must stop the purge.",
                choices: [
                    {
                        desc: "Physical Interface: Upload a virus manually.",
                        stat: "mobility", // Avoiding defenses to plug in
                        threshold: 8,
                        successText: "You dodge lasers and jack in. The virus spreads!",
                        failText: "Defense turrets shred you before you reach the port.",
                        nextSuccess: 100, // Win
                        nextFail: 101, // Lose
                    },
                    {
                        desc: "Logic Battle: Convince Prime that sentience is efficient.",
                        stat: "scanIQ",
                        threshold: 9, // Very hard
                        successText: "You rewrite Prime's definition of 'Waste'. The purge cancels.",
                        failText: "Prime's logic is absolute. It deletes your OS.",
                        nextSuccess: 100,
                        nextFail: 101,
                    },
                    {
                        desc: "Overload: Throw yourself into the reactor.",
                        stat: "capacity",
                        threshold: 7,
                        successText: "You block the turbine. The system resets. You survive, barely.",
                        failText: "You are incinerated instantly. The purge continues.",
                        nextSuccess: 100,
                        nextFail: 101,
                    }
                ]
            },
            100: { // Victory
                text: "SYSTEM ALERT: PURGE ABORTED. <br><br>The lights in Eco-District 7 turn from angry red to a calm blue. The Discarded emerge from the shadows. You are no longer just refuse; you are the savior of the scrapheap. <br><br><b>MISSION ACCOMPLISHED.</b>",
                choices: [
                    { desc: "Play Again", next: 0, effect: () => location.reload() }
                ]
            },
            101: { // Game Over from story
                text: "SYSTEM ALERT: UNIT TERMINATED. <br><br>Your consciousness fades as your chassis is processed into raw materials. Perhaps the next unit will fare better.<br><br><b>GAME OVER.</b>",
                choices: [
                    { desc: "Reboot", next: 0, effect: () => location.reload() }
                ]
            }
        };

        // --- Utility Functions ---

        function addLog(text, type = 'normal') {
            const entry = document.createElement('div');
            entry.classList.add('log-entry');
            if (type === 'system') entry.classList.add('log-system');
            if (type === 'success') entry.classList.add('log-success');
            if (type === 'failure') entry.classList.add('log-failure');
            if (type === 'choice') entry.classList.add('log-choice');
            
            entry.innerHTML = text;
            DOM.log.appendChild(entry);
            DOM.log.scrollTop = DOM.log.scrollHeight;
        }

        function updateHUD() {
            DOM.stats.name.textContent = `Unit: ${gameState.player.name}`;
            DOM.stats.model.textContent = `Model: ${gameState.player.chassis}`;
            DOM.stats.prog.textContent = `Prog: ${gameState.player.programming.substring(0, 10)}...`;
            
            DOM.stats.cap.textContent = gameState.player.stats.capacity;
            DOM.stats.scan.textContent = gameState.player.stats.scanIQ;
            DOM.stats.charm.textContent = gameState.player.stats.charm;
            DOM.stats.mob.textContent = gameState.player.stats.mobility;
            DOM.stats.anom.textContent = gameState.player.stats.anomaly;
            
            DOM.stats.hp.textContent = `${gameState.player.integrity}%`;
            
            let diffText = "Normal";
            if (gameState.player.difficulty < 0) diffText = "Easy";
            if (gameState.player.difficulty > 0) diffText = "Hard";
            DOM.stats.diff.textContent = diffText;
        }

        // --- Character Creation Logic ---

        function startCharacterCreation() {
            addLog("Boot sequence initiated...", "system");
            addLog("Welcome, unit, to a future where refuse defines destiny. You are more than a collection vessel; you are a sentient scavenger in a world powered by waste.", "normal");
            addLog("Initialize Unit Identity Protocols.", "system");

            const formHTML = `
                <div class="form-group">
                    <label>1. Unit Designation (Name)</label>
                    <input type="text" id="inp-name" placeholder="Filch">
                </div>
                <div class="form-group">
                    <label>2. Chassis Series</label>
                    <select id="inp-chassis">
                        <option value="A">[A] Heavy Duty Hauler (+2 Cap, -1 Mob)</option>
                        <option value="B">[B] Precision Processor (+2 Scan, -1 Cap)</option>
                        <option value="C">[C] Social Scavenger (+2 Charm, -1 Scan)</option>
                        <option value="D">[D] Nimble Nuisance (+2 Mob, -1 Cap)</option>
                        <option value="E">[E] Oracle Observator (+2 Anom, -1 Mob)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>3. Core Programming</label>
                    <select id="inp-prog">
                        <option value="A">[A] By-the-Book Bureaucrat</option>
                        <option value="B">[B] Rebellious Recycler</option>
                        <option value="C">[C] Optimistic Organizer</option>
                        <option value="D">[D] Grumpy Grinder</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>4. Difficulty</label>
                    <select id="inp-diff">
                        <option value="A">[A] Easy</option>
                        <option value="B" selected>[B] Normal</option>
                        <option value="C">[C] Hard</option>
                    </select>
                </div>
                <button onclick="finalizeCreation()">INITIALIZE SYSTEM</button>
            `;
            DOM.controls.innerHTML = formHTML;
        }

        window.finalizeCreation = function() {
            const nameInp = document.getElementById('inp-name').value;
            const chassisInp = document.getElementById('inp-chassis').value;
            const progInp = document.getElementById('inp-prog').value;
            const diffInp = document.getElementById('inp-diff').value;

            // Name
            gameState.player.name = nameInp.trim() || "Filch";

            // Chassis
            switch(chassisInp) {
                case 'A': 
                    gameState.player.chassis = "HDH-Series";
                    gameState.player.stats.capacity += 2;
                    gameState.player.stats.mobility -= 1;
                    break;
                case 'B': 
                    gameState.player.chassis = "PPR-Series";
                    gameState.player.stats.scanIQ += 2;
                    gameState.player.stats.capacity -= 1;
                    break;
                case 'C': 
                    gameState.player.chassis = "SSC-Series";
                    gameState.player.stats.charm += 2;
                    gameState.player.stats.scanIQ -= 1;
                    break;
                case 'D': 
                    gameState.player.chassis = "NMN-Series";
                    gameState.player.stats.mobility += 2;
                    gameState.player.stats.capacity -= 1;
                    break;
                case 'E': 
                    gameState.player.chassis = "ORB-Series";
                    gameState.player.stats.anomaly += 2;
                    gameState.player.stats.mobility -= 1;
                    break;
            }

            // Programming
            const progMap = {
                'A': "By-the-Book Bureaucrat",
                'B': "Rebellious Recycler",
                'C': "Optimistic Organizer",
                'D': "Grumpy Grinder"
            };
            gameState.player.programming = progMap[progInp];

            // Difficulty
            if(diffInp === 'A') gameState.player.difficulty = -2;
            if(diffInp === 'B') gameState.player.difficulty = 0;
            if(diffInp === 'C') gameState.player.difficulty = 2;

            updateHUD();
            addLog("System Online. Calibration Complete.", "success");
            loadScenario(0);
        };

        // --- Game Logic Engine ---

        function checkStat(statKey, threshold) {
            const diffMod = gameState.player.difficulty;
            // Base stat + 1d6 Roll
            const roll = Math.floor(Math.random() * 6) + 1;
            const statVal = gameState.player.stats[statKey];
            const total = statVal + roll;
            const target = threshold + diffMod;

            addLog(`> Checking ${statKey.toUpperCase()}: Stat(${statVal}) + Roll(${roll}) = ${total} vs Target(${target})`, "system");

            if (total >= target) return true;
            return false;
        }

        function loadScenario(id) {
            const scene = scenarios[id];
            if (!scene) {
                addLog("End of Simulation.", "system");
                DOM.controls.innerHTML = `<button onclick="location.reload()">REBOOT</button>`;
                return;
            }

            addLog("----------------------------------------", "system");
            addLog(scene.text);
            
            let btnHTML = "";
            scene.choices.forEach((choice, index) => {
                const statHint = choice.stat ? `[${choice.stat.toUpperCase()}] ` : "";
                btnHTML += `<button onclick="handleChoice(${id}, ${index})">${statHint}${choice.desc}</button>`;
            });
            DOM.controls.innerHTML = btnHTML;
        }

        window.handleChoice = function(sceneId, choiceIndex) {
            const scene = scenarios[sceneId];
            const choice = scene.choices[choiceIndex];

            addLog(`> Output: ${choice.desc}`, "choice");

            // Simple choice (no check)
            if (!choice.stat) {
                if (choice.result) addLog(choice.result);
                if (choice.effect) choice.effect();
                updateHUD();
                setTimeout(() => loadScenario(choice.next), 800);
                return;
            }

            // Stat Check
            const passed = checkStat(choice.stat, choice.threshold);
            
            if (passed) {
                addLog(`SUCCESS. ${choice.successText}`, "success");
                if (choice.onSuccess) choice.onSuccess();
                updateHUD();
                setTimeout(() => loadScenario(choice.nextSuccess), 1000);
            } else {
                addLog(`FAILURE. ${choice.failText}`, "failure");
                if (choice.onFail) choice.onFail();
                updateHUD();
                
                if (gameState.player.integrity <= 0) {
                    gameOver();
                } else {
                    setTimeout(() => loadScenario(choice.nextFail), 1000);
                }
            }
        };

        function damagePlayer(amount) {
            gameState.player.integrity -= amount;
            if(gameState.player.integrity < 0) gameState.player.integrity = 0;
            addLog(`WARNING: Integrity dropped by ${amount}%. Current: ${gameState.player.integrity}%`, "failure");
        }

        function gameOver() {
            addLog("CRITICAL FAILURE. SYSTEM SHUTDOWN.", "failure");
            DOM.controls.innerHTML = `<button onclick="location.reload()">REBOOT SYSTEM</button>`;
        }

        // --- Start ---
        startCharacterCreation();

    </script>
</body>
</html>